<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | PetPal Scheduler</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>

    <!-- Root container -->
    <div class="root-container">
        <!-- Navbar -->
        <nav class="navbar-customer-dashboard">
            <div class="logo-customer-dashboard">PetPal Scheduler</div>
            <div class="profile-dropdown">
                <div class="profile-box" onclick="toggleDropdown()">
                    <span id="username">Customer Name</span>
                    <span class="arrow">&#9662;</span> <!-- Dropdown arrow -->
                </div>
                <div id="dropdownMenu" class="dropdown-content-customer-dashboard">
                    <a href="#">Notifications</a>
                    <a href="#">Settings</a>

                    <!-- Palitan ng logic for log out -->
                    <a href="/frontend/public/index.html">Logout</a>

                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-container-customer-dashboard">
            <div class="side-bar-customer-dashboard">
                <div class="user-profile">
                    <label for="upload-pic">
                        <img src="../assets/default-icon.svg" alt="User Profile" id="profile-pic">
                    </label>
                    <input type="file" id="upload-pic" style="display: none;">
                    <h3 id="username">User Name</h3>
                    <p>Customer</p>
                </div>
        
                <ul>
                    <li><a href="#" data-page="home">Home</a></li>
                    <li><a href="#" data-page="booking">Booking</a></li>
                    <li><a href="#" data-page="history">History</a></li>
                    <li><a href="#" data-page="pet-profile">Pet Profile</a></li>
                </ul>
            </div>

            <!-- Dashboard Content -->
            <div class="dashboard-content">

                <!-- Home -->
                <div id="content-home">
                    <h3>Welcome to Dashboard!</h3>
                    <p>This is the home section.</p>

                    <div class="dashboard-grid">
                        <!-- Left Box: Schedule Summary -->
                        <div class="box schedule-summary">
                            <p>Schedule Summary</p>
                        </div>

                        <!-- Right Side: Notifications & Pet Profile Summary -->
                        <div class="right-box">
                            <div class="box small-box">
                                <p>Notifications</p>
                            </div>
                            <div class="box small-box">
                                <p>Pet Profile Summary</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Booking -->
                <div id="content-booking" style="display: none;">
                    <h3>Booking Page</h3>
                    <p>Manage your appointments here.</p>

                    <div class="dashboard-grid-booking">
                        <!-- Pet Info (Left Side, Full Height) -->
                        <div class="form-section pet-info">
                            <h4>Pet Information</h4>

                            <label for="pet-class">Pet:</label>
                            <select id="pet-class" required>
                                <option value="pet-cat">Cat</option>
                                <option value="pet-dog">Dog</option>
                                <option value="pet-rabbit">Rabbit</option>
                                <option value="pet-bird">Bird</option>
                            </select>

                            <label for="pet-name">Pet Name:</label>
                            <input type="text" id="pet-name" placeholder="Enter pet's name" required>

                            <label for="pet-breed">Pet Breed:</label>
                            <input type="text" id="pet-breed" placeholder="Enter pet's breed">

                            <label for="pet-age">Pet Age:</label>
                            <input type="number" id="pet-age" placeholder="Age in years">

                            <label for="pet-weight">Pet Weight (kg):</label>
                            <input type="number" id="pet-weight" placeholder="Weight in kg">
                        </div>

                        <!-- Owner Info (Top Center) -->
                        <div class="form-section owner-info">
                            <h4>Owner Information</h4>
                            <label for="owner-name">Owner's Name:</label>
                            <input type="text" id="owner-name" placeholder="Enter your name" required>
                            <label for="contact-number">Contact Number:</label>
                            <input type="tel" id="contact-number" placeholder="Enter your contact number" required>
                        </div>

                        <!-- Appointment Details (Top Right) -->
                        <div class="form-section appointment-details">
                            <h4>Appointment Details</h4>
                            <label for="appointment-date">Appointment Date:</label>
                            <input type="date" id="appointment-date" required>
                            <label for="appointment-time">Preferred Time Slot:</label>
                            <select id="appointment-time" required>
                                <option value="morning">Morning (8AM - 12PM)</option>
                                <option value="afternoon">Afternoon (1PM - 5PM)</option>
                            </select>
                            <label for="service">Select Service:</label>
                            <select id="service" required>
                                <option value="grooming">Grooming</option>
                                <option value="vet-checkup">Vet Check-up</option>
                                <option value="training">Training</option>
                            </select>
                        </div>

                        <!-- Additional Notes & Extra Services (Bottom Right, Full Width) -->
                        <div class="form-section additional-notes">
                            <h4>Additional Notes & Services</h4>
                            <label for="additional-notes">Special Requests:</label>
                            <textarea id="additional-notes" placeholder="Enter any additional requests..."></textarea>
                            <label>Extra Services:</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" value="nail-trim"> Nail Trim</label>
                                <label><input type="checkbox" value="ear-cleaning"> Ear Cleaning</label>
                                <label><input type="checkbox" value="spa"> Spa Treatment</label>
                            </div>
                            <button type="submit" class="btn-book">Book Appointment</button>
                        </div>
                    </div>
                </div>

                <!-- History -->
                <div id="content-history" style="display: none;">
                    <h3>History Page</h3>
                    <p>View your past appointments here.</p>

                    <!-- Pet Selection Dropdown -->
                    <label for="pet-selection">Select Pet:</label>
                    <select id="pet-selection">
                        <option value="">Select a pet</option>
                        <!-- Pet options will be added dynamically -->
                    </select>

                    <!-- Dashboard Grid -->
                    <div class="dashboard-grid-history">
                        <div class="history-container">
                            <!-- Message when no records exist -->
                            <p id="no-records-message" style="display: none;">No Pet Transaction Found</p>

                            <!-- Appointment Records Table -->
                            <table id="history-table">
                                <thead>
                                    <tr>
                                        <th>Appointment Date</th>
                                        <th>Service</th>
                                        <th>Status</th>
                                        <th>Remarks</th>
                                    </tr>
                                </thead>
                                <tbody id="history-body">
                                    <!-- Records will be inserted dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Print Button -->
                    <button id="print-history">Print / Save as PDF</button>
                </div>

                <!-- Pet Profile (Fixed) -->
                <div id="content-pet-profile" style="display: none;">
                    <h3>Pet Profile</h3>
                    <p>Pet Profile goes here.</p>
                </div>

            </div> <!-- This is the correct closing tag for .dashboard-content -->
        </main>
    </div>

    <script>

        document.addEventListener("DOMContentLoaded", function () {
            const profilePic = document.getElementById("profile-pic");
            const uploadInput = document.getElementById("upload-pic");

            uploadInput.addEventListener("change", function (event) {
                const file = event.target.files[0];

                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        profilePic.src = e.target.result; // Set the image source to the uploaded file
                    };
                    reader.readAsDataURL(file);
                }
            });
        });

        function toggleDropdown() {
            const dropdown = document.getElementById("dropdownMenu");
            dropdown.style.display = (dropdown.style.display === "block") ? "none" : "block";
        }

        // Close the dropdown when clicking outside
        document.addEventListener("click", function (event) {
            const dropdown = document.getElementById("dropdownMenu");
            const profileBox = document.querySelector(".profile-box");

            if (!profileBox.contains(event.target)) {
                dropdown.style.display = "none";
            }
        });
        
        document.addEventListener("DOMContentLoaded", function () {
            function showPage(page) {
                console.log("Switching to page:", page);

                // Hide all sections
                document.querySelectorAll("[id^='content-']").forEach(section => {
                    section.style.display = "none";
                });

                // Show the selected section
                const selectedSection = document.getElementById("content-" + page);
                if (selectedSection) {
                    selectedSection.style.display = "block";
                    console.log("Now showing:", selectedSection.id); // Debugging log
                } else {
                    console.error("ERROR: Section not found for page:", page);
                }

                // Remove active class from all sidebar links
                document.querySelectorAll(".side-bar-customer-dashboard ul li a").forEach(link => {
                    link.classList.remove("active");
                });

                // Add active class to clicked link
                const activeLink = document.querySelector(`[data-page="${page}"]`);
                if (activeLink) {
                    activeLink.classList.add("active");
                }
            }

            // Default: Show Home
            showPage("home");

            // Add click event to menu items
            document.querySelectorAll("[data-page]").forEach(link => {
                link.addEventListener("click", function (event) {
                    event.preventDefault();
                    const page = this.getAttribute("data-page");
                    showPage(page);
                });
            });
        });
    </script>

</body>
</html>